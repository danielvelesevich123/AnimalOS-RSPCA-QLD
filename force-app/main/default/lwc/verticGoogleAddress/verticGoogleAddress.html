<!-- Vertic Google Address -->
<template>
    <div class="slds-grid slds-gutters_small slds-m-bottom_medium" if:false={disabled}>
        <div class="slds-col slds-has-flexi-truncate" role="listitem">
            <label class="slds-form-element__label"><abbr class="slds-required" title="required" if:true={required}>*</abbr>{label}</label>
            <template if:false={searchOnly}>
                <a href="javascript:void(0)" class="slds-text-align_right" onclick={handleEnterManuallyClick} style="display: inline-flex; float: right;" if:false={showAdditionalFields}>
                    <div style="text-decoration: underline">
                        Enter Address manually
                    </div>
                </a>

                <a href="javascript:void(0)" class="slds-text-align_right" onclick={handleClearAddressClick} style="display: inline-flex; float: right;" if:true={showAdditionalFields}>
                    <div style="text-decoration: underline">
                        Clear Address
                    </div>
                </a>
            </template>
            <div class={elementContainerClasses}>
                <div class="slds-form-element__control">
                    <div class="slds-combobox_container slds-has-inline-listbox">
                        <div class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click slds-combobox-lookup" data-id="searchLookup">
                            <div class="slds-combobox__form-element slds-input-has-icon">
                                <input name="autocomplete"
                                       class="slds-input slds-combobox__input"
                                       onkeyup={handleSearchTermChange}
                                       placeholder={placeholder}
                                />

                                <span class="slds-icon_container slds-input__icon slds-input__icon_left">
                                    <lightning-icon class="slds-icon slds-icon slds-icon_x-small slds-icon-text-default" icon-name="utility:checkin" size="x-small"></lightning-icon>
                                    <span class="slds-assistive-text">Description of icon</span>
                                </span>
                                <span class="slds-button slds-button_icon slds-input__icon slds-input__icon_right slds-is-relative">
                                    <c-vertic-spinner is-busy={isBusy} size="small"></c-vertic-spinner>
                                </span>
                                <button class="slds-button slds-button_icon slds-input__icon slds-input__icon_right"
                                        if:true={selectedOption}
                                        onclick={handleClear}>
                                    <lightning-icon class="slds-button__icon" icon-name="utility:close" size="x-small"></lightning-icon>
                                    <span class="slds-assistive-text">Remove selected option</span>
                                </button>
                            </div>

                            <div id="listbox-unique-id" role="listbox">
                                <ul class="slds-listbox slds-listbox_vertical slds-dropdown slds-dropdown_fluid"
                                    role="presentation">

                                    <template for:each={filteredOptions} for:item="option">
                                        <li class="slds-listbox__item"
                                            data-record={option.label}
                                            data-value={option.value}
                                            key={option.value}
                                            onclick={handleSelect}
                                            role="presentation">
                                            <span class="slds-media slds-listbox__option slds-listbox__option_entity slds-listbox__option_has-meta"
                                                  id="listbox-option-unique-id-01"
                                                  role="option">
                                                <span class="slds-media__body">
                                                    <span class="slds-listbox__option-text slds-listbox__option-text_entity">{option.label}</span>
                                                </span>
                                            </span>
                                        </li>
                                    </template>

                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <template if:true={errorMessages}>
                    <div class="slds-form-element__help" for:each={errorMessages} for:item="error" key={error}>
                        <template if:true={error.message}>
                            {error.message}
                        </template>
                        <template if:false={error.message}>
                            {error}
                        </template>
                    </div>
                </template>

            </div>
        </div>
    </div>
    <div class="slds-grid slds-wrap slds-gutters_small slds-m-bottom_medium" data-id="additionalFields" if:true={showAdditionalFields}>
        <div if:false={hideUnit} class="slds-col slds-size_1-of-3" role="listitem">
            <lightning-input data-id="unit"
                             label="Unit / Level"
                             onchange={handleFieldChange}
                             value={unit}
                             class="slds-p-bottom_x-small"
            ></lightning-input>
        </div>
        <div class={streetFieldSize}>
            <lightning-textarea data-id="street"
                                disabled={addressDisabled}
                                label="Street"
                                onchange={handleFieldChange}
                                required={required}
                                value={streetOnly}
                                class="slds-p-bottom_x-small"
            ></lightning-textarea>
        </div>
        <div class="slds-col slds-size_2-of-4" role="listitem">
            <lightning-input data-id="city"
                             disabled={addressDisabled}
                             label="Suburb"
                             onchange={handleFieldChange}
                             required={required}
                             value={city}
                             class="slds-p-bottom_x-small"
            ></lightning-input>
        </div>
        <div class="slds-col slds-size_2-of-4" role="listitem">
            <lightning-input data-id="state"
                             disabled={addressDisabled}
                             label="State"
                             onchange={handleFieldChange}
                             required={required}
                             value={state}
                             class="slds-p-bottom_x-small"
            ></lightning-input>
        </div>
        <div class="slds-col slds-size_2-of-4" role="listitem">
            <lightning-input data-id="postCode"
                             disabled={addressDisabled}
                             label="Postcode"
                             onchange={handleFieldChange}
                             required={required}
                             value={postCode}
            ></lightning-input>
        </div>
        <div class="slds-col slds-size_2-of-4" role="listitem">
            <lightning-input data-id="country"
                             disabled={addressDisabled}
                             label="Country"
                             onchange={handleFieldChange}
                             required={required}
                             value={country}
            ></lightning-input>
        </div>
    </div>
</template>