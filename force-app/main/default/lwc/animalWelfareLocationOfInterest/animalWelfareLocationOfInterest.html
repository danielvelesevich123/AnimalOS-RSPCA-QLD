<!-- Animal Welfare Location Of Interest -->
<template>
    <div class="slds-card slds-card_boundary slds-m-top_medium">
        <lightning-card icon-name="standard:address">
            <div slot="title">
                <lightning-formatted-url value={locationOfInterestUrl} label="Location of Interest" target="_blank" lwc:if={locationOfInterest.Id}></lightning-formatted-url>
                <lightning-formatted-text value="Location of Interest" lwc:else></lightning-formatted-text>
                <span class="slds-m-left_small searching-text" lwc:if={showSearchMessage}>
                <lightning-icon size="xx-small" icon-name="utility:search" class=slds-m-right_x-small></lightning-icon>
                {searchMessage}
            </span>
            </div>
            <div class="slds-grid slds-wrap slds-gutters_x-small slds-m-horizontal_x-small" data-id="form">
                <div class="slds-col slds-size_1-of-1 slds-m-bottom_small">
                    <lightning-button-group>
                        <lightning-button label="Search by Name"
                                          variant={searchByNameVariant}
                                          data-value="Id"
                                          onclick={handleSearchByClick}
                                          disabled={isSearch}
                        ></lightning-button>
                        <lightning-button label="Search by Address"
                                          variant={searchByAddressVariant}
                                          data-value="Address"
                                          onclick={handleSearchByClick}
                                          disabled={isSearch}
                        ></lightning-button>
                        <lightning-button label="Search by Coordinates"
                                          variant={searchByCoordinatesVariant}
                                          data-value="Coordinates"
                                          onclick={handleSearchByClick}
                                          disabled={isSearch}
                        ></lightning-button>
                    </lightning-button-group>
                </div>
                <div class="slds-col slds-size_1-of-2" lwc:if={searchByName}>
                    <c-aos-stencil count="1" height="15" lwc:if={isInit}></c-aos-stencil>
                    <c-aos-lookup data-path="Id"
                                     lwc:else
                                     icon-name="utility:location"
                                     object="animalos__Location_Of_Interest__c"
                                     search-field="Name"
                                     search-mode="SOQL"
                                     placeholder="Search Location of Interest..."
                                     onchange={handleLOILookupChange}
                                     value={locationOfInterest.Id}
                                     disabled={isSearch}
                    ></c-aos-lookup>
                </div>
                <div class="slds-col slds-size_1-of-2" lwc:if={searchByAddress}>
                    <c-aos-stencil count="1" height="15" lwc:if={isInit}></c-aos-stencil>
                    <c-aos-google-address lwc:else search-only onchange={handleSearchAddressChange}></c-aos-google-address>
                </div>
                <div class="slds-col slds-size_1-of-4" lwc:if={searchByCoordinates}>
                    <c-aos-stencil count="1" height="15" lwc:if={isInit}></c-aos-stencil>
                    <lightning-input data-path="animalos__Address__Latitude__s"
                                     lwc:else
                                     value={locationOfInterest.animalos__Address__Latitude__s}
                                     label="Latitude"
                                     type="text"
                                     min="-90"
                                     max="90"
                                     pattern="^-?([1-8]?[0-9](\.\d+)?|90(\.0+)?)$"
                                     message-when-pattern-mismatch="Latitude should be a decimal number in a range [-90, 90]"
                                     disabled={isSearch}
                                     onchange={handleCoordinatesChange}
                    ></lightning-input>
                </div>
                <div class="slds-col slds-size_1-of-4" lwc:if={searchByCoordinates}>
                    <c-aos-stencil count="1" height="15" lwc:if={isInit}></c-aos-stencil>
                    <lightning-input data-path="animalos__Address__Longitude__s"
                                     lwc:else
                                     value={locationOfInterest.animalos__Address__Longitude__s}
                                     label="Longitude"
                                     type="text"
                                     pattern="^-?((1[0-7][0-9]|[1-9]?[0-9])(\.\d+)?|180(\.0+)?)$"
                                     message-when-pattern-mismatch="Longitude should be a decimal number in a range [-180, 180]"
                                     disabled={isSearch}
                                     onchange={handleCoordinatesChange}
                    ></lightning-input>
                </div>
                <div class="slds-col slds-size_1-of-1">
                    <div class="slds-card slds-card_boundary slds-m-top_medium">
                        <lightning-card icon-name="utility:location" title="Basic Information">
                            <div class="slds-grid slds-wrap slds-gutters_x-small slds-m-horizontal_x-small">
                                <div class="slds-col slds-size_1-of-2">
                                    <c-aos-stencil count="1" height="15" lwc:if={isInit}></c-aos-stencil>
                                    <lightning-input data-path="Name"
                                                     value={locationOfInterest.Name}
                                                     label="Location of Interest Name"
                                                     disabled={isSearch}
                                                     required
                                                     lwc:else
                                                     onchange={handleLOIFieldChange}
                                    ></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                    <c-aos-stencil count="1" height="15" lwc:if={isInit}></c-aos-stencil>
                                    <lightning-input lwc:else
                                                     value={locationOfInterest.animalos__Address__Latitude__s}
                                                     label="Latitude"
                                                     type="text"
                                                     read-only
                                    ></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-4">
                                    <c-aos-stencil count="1" height="15" lwc:if={isInit}></c-aos-stencil>
                                    <lightning-input lwc:else
                                                     value={locationOfInterest.animalos__Address__Longitude__s}
                                                     label="Longitude"
                                                     read-only
                                                     type="text"
                                    ></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-1">
                                    <c-aos-stencil count="1" height="15" lwc:if={isInit}></c-aos-stencil>
                                    <lightning-input-address lwc:else
                                                             street-label="Street"
                                                             city-label="City"
                                                             country-label="Country"
                                                             disabled={isSearch}
                                                             province-label="Province"
                                                             postal-code-label="Postal Code"
                                                             city={locationOfInterest.animalos__Address__City__s}
                                                             country={locationOfInterest.animalos__Address__CountryCode__s}
                                                             postal-code={locationOfInterest.animalos__Address__PostalCode__s}
                                                             province={locationOfInterest.animalos__Address__StateCode__s}
                                                             street={locationOfInterest.animalos__Address__Street__s}
                                                             onchange={handleLOIAddressChange}
                                    ></lightning-input-address>
                                </div>
                            </div>
                        </lightning-card>
                    </div>
                </div>
                <div class="slds-col slds-size_1-of-1" lwc:if={showLocationSafety}>
                    <c-aos-stencil count="1" height="15" lwc:if={isInit}></c-aos-stencil>
                    <div class="slds-card slds-card_boundary slds-m-top_medium">
                        <lightning-card icon-name="utility:shield" title="Location Safety">
                            <div class="slds-grid slds-wrap slds-gutters_x-small slds-m-horizontal_x-small">
                                <div class="slds-col slds-size_1-of-3">
                                    <c-aos-stencil count="1" height="15" lwc:if={isInit}></c-aos-stencil>
                                    <lightning-input data-path="aos_POI_Time_at_Location__c"
                                                     lwc:else
                                                     value={locationOfInterest.aos_POI_Time_at_Location__c}
                                                     label="How long as the POI been living at the address?"
                                                     disabled={isSearch}
                                                     onchange={handleLOIFieldChange}
                                    ></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-3">
                                    <c-aos-stencil count="1" height="15" lwc:if={isInit}></c-aos-stencil>
                                    <lightning-input data-path="aos_Number_of_Residents__c"
                                                     lwc:else
                                                     step="1"
                                                     min="0"
                                                     value={locationOfInterest.aos_Number_of_Residents__c}
                                                     label="Number of Residents"
                                                     type="number"
                                                     disabled={isSearch}
                                                     onchange={handleLOIFieldChange}
                                    ></lightning-input>
                                </div>
                                <div class="slds-col slds-size_1-of-3">
                                    <c-aos-stencil count="1" height="15" lwc:if={isInit}></c-aos-stencil>
                                    <c-aos-select data-path="aos_Children_at_Location__c"
                                                     disabled={isSearch}
                                                     lwc:else
                                                     placeholder="Select an Option..."
                                                     label="Are there any children at the address?"
                                                     onchange={handleLOIFieldChange}
                                                     options={yesNoOptions}
                                                     value={locationOfInterest.aos_Children_at_Location__c}
                                    ></c-aos-select>
                                </div>
                                <div class="slds-col slds-size_1-of-1">
                                    <c-aos-stencil count="1" height="15" lwc:if={isInit}></c-aos-stencil>
                                    <lightning-textarea data-path="aos_Children_Details__c"
                                                        lwc:else
                                                        value={locationOfInterest.aos_Children_Details__c}
                                                        label="Children Details"
                                                        disabled={isSearch}
                                                        onchange={handleLOIFieldChange}
                                    ></lightning-textarea>
                                </div>
                                <div class="slds-col slds-size_1-of-1">
                                    <c-aos-stencil count="1" height="15" lwc:if={isInit}></c-aos-stencil>
                                    <lightning-textarea data-path="aos_Location_Safety_Concerns__c"
                                                        lwc:else
                                                        value={locationOfInterest.aos_Location_Safety_Concerns__c}
                                                        label="Is there any reason Inspectors should be concerned for their safety at the property?"
                                                        disabled={isSearch}
                                                        onchange={handleLOIFieldChange}
                                    ></lightning-textarea>
                                </div>
                            </div>
                        </lightning-card>
                    </div>
                </div>
                <div class="slds-col slds-size_1-of-1 slds-m-top_medium" lwc:if={showHistory}>
                    <c-job-contacts record-id={locationOfInterest.Id}
                                    view="animalWelfareLocation"
                                    card-title="Location Of Interest History"
                                    hide-add-violence-button
                                    lwc:ref="locationHistory"
                                    manage-selected-label="Add Selected Contacts to Job"
                                    onmanageselected={handleManageSelected}>
                    </c-job-contacts>
                </div>
            </div>
        </lightning-card>
    </div>
</template>