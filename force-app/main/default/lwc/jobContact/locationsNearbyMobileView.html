<template>
    <div class="slds-grid slds-text-align_left slds-m-top_xx-small slds-wrap slds-grid_vertical-align-center">
        <div class="slds-col slds-size_1-of-12"></div>
        <div class="slds-col slds-size_2-of-12">
            <lightning-button-icon icon-name={iconName} alternative-text={iconName} variant="bare" onclick={changeState}></lightning-button-icon>
        </div>
        <div class="slds-col slds-size_7-of-12 slds-truncate">
            <lightning-formatted-url value={jobContactUrl} label={jobContact.animalos__Contact_Type__c} target="_blank"></lightning-formatted-url>
        </div>
        <div class="slds-col slds-size_2-of-12 slds-truncate flag-icon slds-text-align_right">
            <lightning-formatted-rich-text value={jobContact.animalos__Advisory__c}></lightning-formatted-rich-text>&nbsp;
        </div>
    </div>
    <div lwc:if={isExpanded} class="slds-m-top_medium slds-p-top_small slds-border_top">
        <div class="slds-grid slds-wrap slds-text-align_left slds-grid_vertical-align-center">
            <div class="slds-col slds-size_1-of-12"></div>
            <div class="slds-col slds-size_3-of-12">
                <b>
                    <lightning-formatted-text value="Contact Details"></lightning-formatted-text>
                </b>
            </div>
            <div class="slds-col slds-size_8-of-12 slds-border_bottom slds-p-bottom_x-small">
                <div class="slds-grid slds-wrap slds-grid_vertical-align-center">
                    <div class="slds-col slds-size_1-of-1">
                        <lightning-icon icon-name="utility:people" size="xx-small"></lightning-icon>
                        <lightning-formatted-url class="slds-m-left_small" label={jobContact.animalos__Contact__r.Name} value={contactUrl}></lightning-formatted-url>
                    </div>
                    <div class="slds-col slds-size_1-of-1" lwc:if={hasMobilePhone}>
                        <lightning-icon icon-name="utility:outbound_call" size="xx-small"></lightning-icon>
                        <lightning-formatted-phone class="slds-m-left_small" value={jobContact.animalos__Contact__r.MobilePhone}></lightning-formatted-phone>
                    </div>
                    <div class="slds-col slds-size_1-of-1" lwc:if={hasPhone}>
                        <lightning-icon icon-name="utility:outbound_call" size="xx-small"></lightning-icon>
                        <lightning-formatted-phone class="slds-m-left_small" value={jobContact.animalos__Contact__r.Phone}></lightning-formatted-phone>
                    </div>
                    <div class="slds-col slds-size_1-of-1" lwc:if={hasEmail}>
                        <lightning-icon icon-name="utility:email" size="xx-small"></lightning-icon>
                        <lightning-formatted-email class="slds-m-left_small" hide-icon value={jobContact.animalos__Contact__r.Email}></lightning-formatted-email>
                    </div>
                    <div class="slds-col slds-size_1-of-1" lwc:if={hasAddress}>
                        <lightning-icon icon-name="utility:location" size="xx-small"></lightning-icon>
                        <lightning-formatted-address city={jobContact.animalos__Contact__r.MailingCity}
                                                     street={jobContact.animalos__Contact__r.MailingStreet}
                                                     postal-code={jobContact.animalos__Contact__r.MailingPostalCode}
                                                     province={jobContact.animalos__Contact__r.MailingState}
                                                     country={jobContact.animalos__Contact__r.MailingCountry}
                                                     class="slds-list_inline slds-m-left_medium"
                        ></lightning-formatted-address>
                    </div>
                </div>
            </div>
            <div class="slds-col slds-size_1-of-12"></div>
            <div class="slds-col slds-size_5-of-12">
                <b>
                    <lightning-formatted-text value="Cautions"></lightning-formatted-text>
                </b>
                <lightning-button-icon icon-name={cautionsIconName} alternative-text={cautionsIconName} variant="bare" onclick={changeCautionsState}></lightning-button-icon>
            </div>
            <div class="slds-col slds-size_6-of-12"></div>
            <template lwc:if={isCautionsExpanded}>
                <div class="slds-col slds-size_1-of-12"></div>
                <div class="slds-col slds-size_3-of-12">
                    <b>
                        <lightning-formatted-text value="Job Cautions"></lightning-formatted-text>
                    </b>
                </div>
                <div class="slds-col slds-size_8-of-12">
                    <c-job-contact-interaction-cautions job-contact-id={jobContact.Id} view={view}></c-job-contact-interaction-cautions>
                </div>
                <div class="slds-col slds-size_1-of-12"></div>
                <div class="slds-col slds-size_3-of-12">
                    <b>
                        <lightning-formatted-text value="All Cautions"></lightning-formatted-text>
                    </b>
                </div>
                <div class="slds-col slds-size_8-of-12">
                    <c-job-contact-interaction-cautions contact-id={jobContact.animalos__Contact__c} view={view}></c-job-contact-interaction-cautions>
                </div>
            </template>
        </div>
    </div>
</template>