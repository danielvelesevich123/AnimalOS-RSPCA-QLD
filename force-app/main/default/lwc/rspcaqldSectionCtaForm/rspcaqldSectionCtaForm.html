<template>
    <div class={containerClass}>
        <div class={mainClass}>
            <div class="section-cta-form-info">
                <div class="graphic-icon">
                    <div class="icon-block shape-1"><img src={iconURL.data}></div>
                </div>
                <div class="desc">
                    <h1><lightning-formatted-rich-text value={header}></lightning-formatted-rich-text></h1>
                    <p class="medium"><lightning-formatted-rich-text value={description}></lightning-formatted-rich-text></p>
                </div>
            </div>
            <div class="section-cta-form-form">
                <div class="row">
                    <lightning-input disabled={isSubmitting} value={contact.firstName} type="text" label="First Name" placeholder="First Name" class="input-inline" data-name="first-name" required="true" onchange={handleFieldChange} message-when-value-missing={requiredText} max-length="40"></lightning-input>
                    <lightning-input disabled={isSubmitting} value={contact.lastName} type="text" label="Last Name" placeholder="Last Name" class="input-inline" data-name="last-name" required="true" onchange={handleFieldChange} message-when-value-missing={requiredText} max-length="80"></lightning-input>
                </div>
                <div class="row">
                    <lightning-input disabled={isSubmitting} value={contact.email} type="email" label="Email" placeholder="Email" class="input-inline email-input" data-name="email" required="true" onchange={handleFieldChange} onblur={validateEmail} max-length="80" message-when-bad-input="The email address is incorrect" message-when-pattern-mismatch="The email address is incorrect" message-when-type-mismatch="The email address is incorrect" message-when-value-missing={requiredText}></lightning-input>
                </div>
                <div class="row" onkeydown={handlePhoneKeydown}>
                    <lightning-input disabled={isSubmitting} value={contact.phone} type="tel" label="Phone Number" placeholder="Phone Number" class="input-inline phone-input" data-name="phone" required="true" onchange={handleFieldChange} onblur={validatePhone} message-when-value-missing={requiredText}></lightning-input>
                </div>
                <template if:false={isVolunteer}>
                    <div class="row">
                        <lightning-input disabled={isSubmitting} value={contact.organisation} type="text" label={organisationLabel} placeholder={organisationLabel} class="input-inline" data-name="organisation" onchange={handleFieldChange} required={isEducation} message-when-value-missing={requiredText} max-length="255"></lightning-input>
                    </div>
                </template>
                <template if:true={isVolunteer}>
                    <div class="row">
                        <c-rspcaqld-picklist disabled={isSubmitting} value={cs.preferredContactMethod} label="Preferred Contact Method" placeholder="Select option" options={preferredContactMethodTypes.data} data-name="preferred-contact-method-type" onchange={handleFieldChange} multiselect></c-rspcaqld-picklist>
                    </div>
                    <div class="row">
                        <c-rspcaqld-checkbox disabled={isSubmitting} checked={cs.volunteerDeclaration} label="I am over the age of 16 and able to commit to an ongoing volunteering role" data-name="volunteer-declaration" onchange={handleFieldChange} error-message={requiredText} required="true" error={isVolunteerDeclarationError}></c-rspcaqld-checkbox>
                    </div>
                </template>
                <template if:true={isVolunteer}>
                    <div class="row">
                        <c-rspcaqld-picklist disabled={isSubmitting} value={cs.location} label={locationLabel} placeholder={locationPlaceholder} options={preferredLocations} data-name="location" onchange={handleFieldChange} required="true" error-message={requiredText} multiselect></c-rspcaqld-picklist>
                    </div>
                </template>
                <template if:true={isEducation}>
                    <div class="row">
                        <lightning-input disabled={isSubmitting} value={cs.location} type="text" label={locationLabel} placeholder={locationPlaceholder} class="input-inline" data-name="location" required="true" onchange={handleFieldChange} message-when-value-missing={requiredText} max-length="255"></lightning-input>
                    </div>
                </template>
                <template if:true={isPartner}>
                    <div class="row">
                        <c-rspcaqld-picklist disabled={isSubmitting} value={cs.partnershipType} multiselect label="Does your partnership enquiry relate to" placeholder="Select option" options={partnershipTypes.data} data-name="partnership-type" onchange={handleFieldChange}></c-rspcaqld-picklist>
                    </div>
                </template>
                <template if:true={isEducation}>
                    <div class="row">
                        <c-rspcaqld-picklist disabled={isSubmitting} value={cs.educationType} multiselect label="Does your education enquiry relate to" placeholder="Select option" options={educationTypes.data} data-name="education-type" onchange={handleFieldChange}  error-message={requiredText} required></c-rspcaqld-picklist>
                    </div>
                </template>
                <div class="row">
                    <lightning-textarea disabled={isSubmitting} value={cs.description} label={descriptionLabel} placeholder={descriptionPlaceholder} class="input-textarea" data-name="description" onchange={handleFieldChange}></lightning-textarea>
                </div>
                <template lwc:if={isNewsletterRequired}>
                    <div class="row">
                        <c-rspcaqld-checkbox disabled={isSubmitting} checked={cs.marketingOptin} label={portalSetting.Subscribe_to_Newsletter_Text__c} data-name="marketing-optin" onchange={handleFieldChange}></c-rspcaqld-checkbox>
                    </div>
                </template>
                <template lwc:if={isPrivacyPolicy}>
                    <div class="row">
                        <c-rspcaqld-checkbox disabled={isSubmitting} checked={cs.privacyPolicy} label={portalSetting.Privacy_Statement_Text__c} data-name="privacy-policy" onchange={handleFieldChange} error={isPrivacyPolicyError} error-message="To continue, please read and agree to the privacy statement" required></c-rspcaqld-checkbox>
                    </div>
                </template>
                <div class="row button-row">
                    <button disabled={isSubmitting} class="green-btn" onclick={handleSubmit}>Submit form</button>
                </div>
            </div>
        </div>
        <div class={desktopSubmittedClass}><h3>{thankYouMessage}</h3></div>
    </div>
    <div class={mobileSubmittedClass}><h3>{thankYouMessage}</h3></div>
</template>