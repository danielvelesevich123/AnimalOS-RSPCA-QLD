<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Existing_Currency_Code</name>
        <label>Get Existing Currency Code (if avail.)</label>
        <locationX>347</locationX>
        <locationY>242</locationY>
        <actionName>movedata__GetValueComponent</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Has_Existing_Currency_Code</targetReference>
        </connector>
        <dataTypeMappings>
            <typeName>T__Record</typeName>
            <typeValue>npe03__Recurring_Donation__c</typeValue>
        </dataTypeMappings>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>FieldName</name>
            <value>
                <stringValue>CurrencyIsoCode</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>Record</name>
            <value>
                <elementReference>Record</elementReference>
            </value>
        </inputParameters>
        <nameSegment>movedata__GetValueComponent</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Log_Different_Currency_Codes</name>
        <label>Log: Different Currency Codes</label>
        <locationX>61</locationX>
        <locationY>566</locationY>
        <actionName>movedata__WriteToLogFlowComponent</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Set_Cancel_to_TRUE</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>Detail</name>
            <value>
                <stringValue>Cancelling due to a differing currency codes.  (Cannot have a currency differing between a donation and its parent recurring donation; not supported by NPSP)</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>LogList</name>
            <value>
                <elementReference>Logs</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>Message</name>
            <value>
                <stringValue>Cancel Received</stringValue>
            </value>
        </inputParameters>
        <nameSegment>movedata__WriteToLogFlowComponent</nameSegment>
        <outputParameters>
            <assignToReference>LogsJSON</assignToReference>
            <name>LogJson</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>Logs</assignToReference>
            <name>LogList</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Set_Currency</name>
        <label>Set Currency</label>
        <locationX>512</locationX>
        <locationY>1550</locationY>
        <actionName>md_npsp_pack__SetCurrencyValueFlowComponent</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>StartDate_Local_Time</targetReference>
        </connector>
        <dataTypeMappings>
            <typeName>T__Record</typeName>
            <typeValue>npe03__Recurring_Donation__c</typeValue>
        </dataTypeMappings>
        <dataTypeMappings>
            <typeName>U__Record</typeName>
            <typeValue>npe03__Recurring_Donation__c</typeValue>
        </dataTypeMappings>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>CurrencyCode</name>
            <value>
                <elementReference>CurrencyType</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>Record</name>
            <value>
                <elementReference>Record</elementReference>
            </value>
        </inputParameters>
        <nameSegment>md_npsp_pack__SetCurrencyValueFlowComponent</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>StartDate_Local_Time</name>
        <label>Convert Start Date to Local Time</label>
        <locationX>512</locationX>
        <locationY>1658</locationY>
        <actionName>md_npsp_pack__ConvertToLocalDateFlowComponent</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Set_Values</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>DateTimeInput</name>
            <value>
                <elementReference>StartDate</elementReference>
            </value>
        </inputParameters>
        <nameSegment>md_npsp_pack__ConvertToLocalDateFlowComponent</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <apiVersion>49.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Set_Account</name>
        <label>Set Account</label>
        <locationX>776</locationX>
        <locationY>1250</locationY>
        <assignmentItems>
            <assignToReference>Record.npe03__Organization__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>DonorAccount.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Currency</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Active_Status</name>
        <label>Set Active Status</label>
        <locationX>908</locationX>
        <locationY>2582</locationY>
        <assignmentItems>
            <assignToReference>Record.npsp__Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Active</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Has_Campaign</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Campaign</name>
        <label>Set Campaign</label>
        <locationX>380</locationX>
        <locationY>2882</locationY>
        <assignmentItems>
            <assignToReference>Record.npe03__Recurring_Donation_Campaign__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>DonationCampaign.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Determine_Next_Payment_Date</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Cancel_to_TRUE</name>
        <label>Set Cancel to TRUE</label>
        <locationX>61</locationX>
        <locationY>674</locationY>
        <assignmentItems>
            <assignToReference>Cancel</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_Closed_Status</name>
        <label>Set Closed Status</label>
        <locationX>116</locationX>
        <locationY>2582</locationY>
        <assignmentItems>
            <assignToReference>Record.npsp__Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Closed</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Has_Campaign</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Contact_Value_0</name>
        <label>Set Contact</label>
        <locationX>512</locationX>
        <locationY>1250</locationY>
        <assignmentItems>
            <assignToReference>Record.npe03__Contact__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>DonorContact.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Currency</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Contact_Value_0_0</name>
        <label>Set Contact</label>
        <locationX>248</locationX>
        <locationY>1358</locationY>
        <assignmentItems>
            <assignToReference>Record.npe03__Contact__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>DonorContact.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Currency</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Date_Established_on_Record</name>
        <label>Set Date Established on Record</label>
        <locationX>380</locationX>
        <locationY>2282</locationY>
        <assignmentItems>
            <assignToReference>Record.npe03__Date_Established__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>StartDate_Local_Time.LocalDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Determine_Status</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Day_of_Month_on_Record</name>
        <label>Set Day of Month on Record</label>
        <locationX>842</locationX>
        <locationY>3698</locationY>
        <assignmentItems>
            <assignToReference>Record.npsp__Day_of_Month__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CalculatedDay</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Default_Open_Ended</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Lapsed_Status</name>
        <label>Set Lapsed Status</label>
        <locationX>380</locationX>
        <locationY>2582</locationY>
        <assignmentItems>
            <assignToReference>Record.npsp__Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Lapsed</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Has_Campaign</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Monthly_Frequency</name>
        <label>Set Monthly Frequency</label>
        <locationX>974</locationX>
        <locationY>3482</locationY>
        <assignmentItems>
            <assignToReference>Record.npe03__Installment_Period__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Monthly</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Day_of_Month</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Next_Payment_Date</name>
        <label>Set Next Payment Date</label>
        <locationX>380</locationX>
        <locationY>3182</locationY>
        <assignmentItems>
            <assignToReference>Record.npe03__Next_Payment_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CalculatedNextPaymentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Determine_Frequency</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Open_Ended_to_Open</name>
        <label>Set Open Ended to Open</label>
        <locationX>380</locationX>
        <locationY>4082</locationY>
        <assignmentItems>
            <assignToReference>Record.npe03__Open_Ended_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Open</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Platform_Key</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Paused_Status</name>
        <label>Set Paused Status</label>
        <locationX>644</locationX>
        <locationY>2582</locationY>
        <assignmentItems>
            <assignToReference>Record.npsp__Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Paused</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Has_Campaign</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Platform_Key</name>
        <label>Set Platform Key</label>
        <locationX>512</locationX>
        <locationY>4274</locationY>
        <assignmentItems>
            <assignToReference>Record.md_npsp_pack__Platform_Key__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>PlatformKey</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_Quarterly_Frequency</name>
        <label>Set Quarterly Frequency</label>
        <locationX>578</locationX>
        <locationY>3482</locationY>
        <assignmentItems>
            <assignToReference>Record.npe03__Installment_Period__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Quarterly</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Set_Day_of_Month</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Start_Date_on_Record</name>
        <label>Set Start Date on Record</label>
        <locationX>380</locationX>
        <locationY>1982</locationY>
        <assignmentItems>
            <assignToReference>Record.npsp__StartDate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>StartDate_Local_Time.LocalDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Date_Established</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Values</name>
        <label>Set Values</label>
        <locationX>512</locationX>
        <locationY>1766</locationY>
        <assignmentItems>
            <assignToReference>Record.npe03__Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CalculatedAmount</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Start_Date</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Weekly_Frequency</name>
        <label>Set Weekly Frequency</label>
        <locationX>314</locationX>
        <locationY>3482</locationY>
        <assignmentItems>
            <assignToReference>Record.npe03__Installment_Period__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Weekly</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Default_Open_Ended</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Yearly_Frequency</name>
        <label>Set Yearly Frequency</label>
        <locationX>50</locationX>
        <locationY>3482</locationY>
        <assignmentItems>
            <assignToReference>Record.npe03__Installment_Period__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Yearly</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Default_Open_Ended</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Currency_Code_out_of_sync</name>
        <label>Currency Code out of sync?</label>
        <locationX>193</locationX>
        <locationY>458</locationY>
        <defaultConnector>
            <targetReference>Determine_Donor</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_Out_of_Sync</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>CurrencyType</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>CurrencyType</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>Existing_Currency_Code.StringValue</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Log_Different_Currency_Codes</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Default_Open_Ended</name>
        <label>Default Open Ended</label>
        <locationX>512</locationX>
        <locationY>3974</locationY>
        <defaultConnector>
            <targetReference>Set_Platform_Key</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Record.npe03__Open_Ended_Status__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Open_Ended_to_Open</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Determine_Donor</name>
        <label>Determine Donor</label>
        <locationX>512</locationX>
        <locationY>1142</locationY>
        <defaultConnector>
            <targetReference>Set_Account</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Account</defaultConnectorLabel>
        <rules>
            <name>Anonymous_Determine_Donor</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>DonorContact</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>DonorAccount</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Config_AnonymousContactId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Anonymous_Contact_from_Config</targetReference>
            </connector>
            <label>Anonymous</label>
        </rules>
        <rules>
            <name>Contact_Determine_Donor</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>DonorAccount</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Contact_Value_0</targetReference>
            </connector>
            <label>Contact</label>
        </rules>
    </decisions>
    <decisions>
        <name>Determine_Frequency</name>
        <label>Determine Frequency</label>
        <locationX>512</locationX>
        <locationY>3374</locationY>
        <defaultConnector>
            <targetReference>Set_Monthly_Frequency</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Monthly</defaultConnectorLabel>
        <rules>
            <name>Yearly_Frequency</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Frequency</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>yearly</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Yearly_Frequency</targetReference>
            </connector>
            <label>Yearly</label>
        </rules>
        <rules>
            <name>Weekly_Frequency</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Frequency</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>weekly</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Weekly_Frequency</targetReference>
            </connector>
            <label>Weekly</label>
        </rules>
        <rules>
            <name>Quarterly_Frequency</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Frequency</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>quarterly</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Quarterly_Frequency</targetReference>
            </connector>
            <label>Quarterly</label>
        </rules>
    </decisions>
    <decisions>
        <name>Determine_Next_Payment_Date</name>
        <label>Determine Next Payment Date</label>
        <locationX>512</locationX>
        <locationY>3074</locationY>
        <defaultConnector>
            <targetReference>Determine_Frequency</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>[Default]</defaultConnectorLabel>
        <rules>
            <name>Greater_Than_Current_Payment_Date</name>
            <conditionLogic>1 AND (2 OR 3)</conditionLogic>
            <conditions>
                <leftValueReference>CalculatedNextPaymentDate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Record.npe03__Next_Payment_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>CalculatedNextPaymentDate</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>$Flow.CurrentDateTime</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Next_Payment_Date</targetReference>
            </connector>
            <label>Greater Than</label>
        </rules>
    </decisions>
    <decisions>
        <name>Determine_Status</name>
        <label>Determine Status</label>
        <locationX>512</locationX>
        <locationY>2474</locationY>
        <defaultConnector>
            <targetReference>Set_Active_Status</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Success</defaultConnectorLabel>
        <rules>
            <name>Cancelled_Complete</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>cancelled</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>complete</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Closed_Status</targetReference>
            </connector>
            <label>Cancelled / Complete</label>
        </rules>
        <rules>
            <name>Failed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>failed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Lapsed_Status</targetReference>
            </connector>
            <label>Failed</label>
        </rules>
        <rules>
            <name>Paused</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>paused</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Paused_Status</targetReference>
            </connector>
            <label>Paused</label>
        </rules>
    </decisions>
    <decisions>
        <name>Evaluate_Record</name>
        <label>Evaluate Record</label>
        <locationX>512</locationX>
        <locationY>134</locationY>
        <defaultConnector>
            <targetReference>Determine_Donor</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>New Record</defaultConnectorLabel>
        <rules>
            <name>Eval_Existing_Record</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IsNewRecord</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Existing_Currency_Code</targetReference>
            </connector>
            <label>Existing Record</label>
        </rules>
    </decisions>
    <decisions>
        <name>Has_Campaign</name>
        <label>Has Campaign</label>
        <locationX>512</locationX>
        <locationY>2774</locationY>
        <defaultConnector>
            <targetReference>Determine_Next_Payment_Date</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_Campaign</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>DonationCampaign</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>DonationCampaign.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Campaign</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Has_Existing_Currency_Code</name>
        <label>Has Existing Currency Code</label>
        <locationX>347</locationX>
        <locationY>350</locationY>
        <defaultConnector>
            <targetReference>Determine_Donor</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_Currency_Code</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Existing_Currency_Code.FieldExists</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Existing_Currency_Code.WasSet</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Existing_Currency_Code.StringValue</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Currency_Code_out_of_sync</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Set_Date_Established</name>
        <label>Set Date Established</label>
        <locationX>512</locationX>
        <locationY>2174</locationY>
        <defaultConnector>
            <targetReference>Determine_Status</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_Date_Established</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Suppress_RecurringDateEstablished</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Date_Established_on_Record</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Set_Day_of_Month</name>
        <label>Set Day of Month</label>
        <locationX>974</locationX>
        <locationY>3590</locationY>
        <defaultConnector>
            <targetReference>Default_Open_Ended</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_Day</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Suppress_RecurringDayOfMonth</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Day_of_Month_on_Record</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Set_Start_Date</name>
        <label>Set Start Date</label>
        <locationX>512</locationX>
        <locationY>1874</locationY>
        <defaultConnector>
            <targetReference>Set_Date_Established</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_Start_Date</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Suppress_RecurringStartDate</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Start_Date_on_Record</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>CalculatedAmount</name>
        <dataType>Currency</dataType>
        <expression>IF({!Config_DonationAmountSubtractFeePlatform}==TRUE, {!DefaultedAmount} - {!CalculatedFeePlatform}, {!DefaultedAmount})</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>CalculatedDay</name>
        <dataType>String</dataType>
        <expression>IF(
  ISBLANK({!NextPaymentDate}), 
  IF (
    ISBLANK({!Day}),
    IF (
      ISBLANK({!StartDate}),
      NULL,
      TEXT( DAY( DATEVALUE( {!StartDate} ) ) )
    ),
    TEXT( {!Day} )  
  ),
  TEXT( DAY( DATEVALUE( {!NextPaymentDate} ) ) )
)</expression>
    </formulas>
    <formulas>
        <name>CalculatedFeePlatform</name>
        <dataType>Currency</dataType>
        <expression>IF(ISBLANK({!CalculatedFeePlatformPublic}), {!DefaultedFeePlatform}, {!CalculatedFeePlatformPublic})</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>CalculatedFeePlatformPublic</name>
        <dataType>Currency</dataType>
        <expression>IF(ISBLANK({!FeePlatformPublic}), {!Donation_FeePlatformPublic}, {!FeePlatformPublic})</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>CalculatedNextPaymentDate</name>
        <dataType>Date</dataType>
        <expression>IF(ISBLANK({!NextPaymentDate}), NULL, DATEVALUE( {!NextPaymentDate} ))</expression>
    </formulas>
    <formulas>
        <name>DefaultedAmount</name>
        <dataType>Currency</dataType>
        <expression>IF(ISBLANK({!Amount}), 0, {!Amount})</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>DefaultedFeePlatform</name>
        <dataType>Currency</dataType>
        <expression>IF(
    ISBLANK({!FeePlatform}), 
    IF(
        ISBLANK({!Donation_FeePlatform}),
        0,
        {!Donation_FeePlatform}
    ),
    {!FeePlatform}
)</expression>
        <scale>2</scale>
    </formulas>
    <interviewLabel>[MoveData] Donation: Recurring - Mapping {!$Flow.CurrentDateTime}</interviewLabel>
    <isTemplate>true</isTemplate>
    <label>[MoveData] Donation: Recurring - Mapping</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Anonymous_Contact_from_Config</name>
        <label>Get Anonymous Contact from Config</label>
        <locationX>248</locationX>
        <locationY>1250</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Set_Contact_Value_0_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Config_AnonymousContactId</elementReference>
            </value>
        </filters>
        <object>Contact</object>
        <outputReference>DonorContact</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>FirstName</queriedFields>
        <queriedFields>LastName</queriedFields>
        <queriedFields>AccountId</queriedFields>
    </recordLookups>
    <start>
        <locationX>386</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Evaluate_Record</targetReference>
        </connector>
    </start>
    <status>Obsolete</status>
    <variables>
        <name>AccountId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Amount</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>Cancel</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>Config_AnonymousContactId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Config_DonationAmountSubtractFeePlatform</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>CurrencyType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Day</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>Donation_FeePlatform</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>Donation_FeePlatformPublic</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>DonationCampaign</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Campaign</objectType>
    </variables>
    <variables>
        <name>DonorAccount</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>DonorContact</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <name>EndDate</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>FeePlatform</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>FeePlatformPublic</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>Financials_OriginFeePlatform</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>Frequency</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>IsNewRecord</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Key</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Logs</name>
        <apexClass>movedata__MoveDataLogEntry</apexClass>
        <dataType>Apex</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>LogsJSON</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>NextPaymentDate</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>PlatformKey</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Record</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>npe03__Recurring_Donation__c</objectType>
    </variables>
    <variables>
        <name>StartDate</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Status</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Suppress_RecurringDateEstablished</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>Suppress_RecurringDayOfMonth</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>Suppress_RecurringStartDate</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
</Flow>
